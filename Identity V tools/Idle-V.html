<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="title">Identity V tools</title>
    <link rel="stylesheet" href="main.css" type="text/css">
    <style>
        body {
            font-size: 35px;
            overflow-y: scroll;
        }
    </style>
</head>
<body onload="warn()">
    <script>
        function warn() {
            alert('Please Note progress does not save. \nThis is version 0.5.0 so there are still many bugs and unfinished features. \nYou can add clues by pressing p')
        }
    </script>
<center>
    <div style="font-size: 100px;">Idle V</div>
    <div style="font-size: 40px;">By Yo7</div>
    <a href="index.html" style="font-size: 20px;">Back to tools</a> <br><br>
    <div id="currency">Clues: 0 | Fragments: 0 | Insperation: 0 | Echos: 0 </div> <br>
    <button id="shop_button" class="button" style="position: unset; display: inline;" onclick="{openshop()}">Shop</button>
    <button id="inventory_button" class="button" style="position: unset; display: inline;" onclick="{openinv()}">Inventory</button>
    <button id="settings_button" class="button" style="position: unset; display: inline;" onclick="{opensettings()}">Settings</button>
    <br><br>

    <button id="play_button" onclick="{start()}" class="button" style="display: block; position: relative;">Play</button>

    <div id="settingspage" style="display: none;">
        Settings
        <form style="font-size: 22px;">
            <input type="checkbox">Music <br>
            <input type="checkbox">Sound effects <br>
            <input id="school" type="checkbox">School safe tab <br>
            <input id="extrares" type="checkbox">Show extra result info <br>
            <input id="showstats" type="checkbox">Show character stats (in console (ctrl + shift + i)) <br>
            Set font size <input type="text" placeholder="35px"> <button>Apply</button> <br>
        </form>

        <br><br>
        <button onclick="{closesettings()}" class="button" style="display: block; position: relative;">Exit</button>
    </div>

    <div id="shoppage" style="display: none;">
        <button class="button" style="position: unset; display: inline;" onclick="{shopcharacters()}">Characters</button>
        <button class="button" style="position: unset; display: inline;" onclick="{shopessence()}">Essence</button>
        <button class="button" style="position: unset; display: inline;" onclick="{shopskins()}">Skins</button>
        <button class="button" style="position: unset; display: inline;" onclick="{shopauto()}">Automation</button>
        <br><br>

        <select class="button" style="position: relative; width: 500px;" id="shopsel">
            <option id="op0">No catagory selected</option>
        </select>

        <button class="button" style="position: unset; display: inline;" onclick="{buy()}">Buy</button>

        <br><br>
        <button class="button" style="position: unset; display: inline;" onclick="{closeshop()}">Exit</button>
    </div>

    <div id="invpage" style="display: none;">
        You dont own anything yet
        <br>
        <button class="button" style="position: unset; display: inline;" onclick="{closeinv()}">Exit</button>
    </div>

    <div id="gamepage001" style="display: none;">
        Select a mode <br><br>
        <button class="button" style="position: unset; display: inline;" onclick="{playquick()}">Quick</button>
        <button class="button" style="position: unset; display: inline;">Ranked</button>
        <button class="button" style="position: unset; display: inline;">2v8</button>
    </div>

    <div id="gamepage002" style="display: none;">
        Your team
        <p id="quick_team"></p>

        <select class="button" style="position: unset; display: inline;" id="sel001">
            <option>Lucky guy</option>
            <option>Doctor</option>
            <option>Lawyer</option>
            <option>Thief</option>
            <option>Gardener</option>
        </select>

        <button class="button" style="position: unset; display: inline;" onclick="{runquick()}">Ready</button>
    </div>

    <div id="gamepage003" style="display: none;">
        Results
        <p id="res">FF</p>
        <button class="button" style="position: unset; display: inline;" onclick="{retrn()}">Continue</button>
    </div>
</center>
</body>

<script>
    let clues = 0
    let fragments = 0
    let insperation = 0
    let echos = 0

    buying = ''

    let clock 
    clearInterval(clock)
    clock = setInterval( function() {
        document.getElementById('currency').innerHTML = 'Clues: ' + clues + ' | Fragments: ' + fragments + ' | Insperation: ' + insperation + ' | Echos: ' + echos

        if (document.getElementById('school').checked) {
            document.getElementById('title').innerHTML = 'New Tab'
        } else {
            document.getElementById('title').innerHTML = 'Identity V tools'
        }

        if (document.getElementById('showstats').checked) {
            console.log('Survivor stats \n\n' + survivors + '\n\n\nHunter stats \n\n' + hunters)
        }
    }, 10)

    function start() {
        document.getElementById('play_button').style.display = 'none'
        document.getElementById('gamepage001').style.display = 'block'

        document.getElementById('shop_button').style.display = 'none'
        document.getElementById('settings_button').style.display = 'none'
        document.getElementById('inventory_button').style.display = 'none'
    }

    function shopcharacters() {
            document.getElementById("shopsel").options.length = 0
            buying = 'character'

            for(let i = 0; i < unownedcharacters.length; i++) {
                var terms = document.createElement("option");
                terms.setAttribute("id","op" + i);
                document.getElementById('shopsel').appendChild(terms)


                document.getElementById('op' + i).innerHTML = unownedcharacters[i][0] + ' | ' + unownedcharacters[i][1] + ' Clues'
            }
        }

        function shopessence() {
            document.getElementById("shopsel").options.length = 0
            buying = 'essence'

            for(let i = 0; i < essence.length; i++) {
                var terms = document.createElement("option");
                terms.setAttribute("id","oppp" + i);
                document.getElementById('shopsel').appendChild(terms)


                document.getElementById('oppp' + i).innerHTML = essence[i][0] + ' | ' + essence[i][1] + ' Insperation'
            }
        }

        function shopskins() {
            document.getElementById("shopsel").options.length = 0
            buying = 'skin'

            for(let i = 0; i < skin.length; i++) {
                var terms = document.createElement("option");
                terms.setAttribute("id","opppp" + i);
                document.getElementById('shopsel').appendChild(terms)


                document.getElementById('opppp' + i).innerHTML = skin[i][0] + ' | ' + skin[i][1] + ' Fragments'
            }
        }

        function shopauto() {
            document.getElementById("shopsel").options.length = 0
            buying = 'auto'

            for(let i = 0; i < auto.length; i++) {
                var terms = document.createElement("option");
                terms.setAttribute("id","opppp" + i);
                document.getElementById('shopsel').appendChild(terms)


                document.getElementById('opppp' + i).innerHTML = auto[i][0] + ' | ' + auto[i][1] + ' Echos'
            }
        }

        document.addEventListener('keydown', function(e){
            if (e.key == 'p') {
                clues = clues + 4000
            }
        })

        checkbuy = ''

        function buy() {
            val = document.getElementById('shopsel').value

            param01 = 0
            param02 = 1
            checkbuy = ''

            if (buying == 'character') {

                for (let i = 0; i < val.length; i++) {
                    x = val.slice(param01,param02)

                    if (x == ' ') {
                        for (let i = 0; i < unownedcharacters.length; i++) {

                            if(checkbuy == unownedcharacters[i][0]) {

                                if (clues >= unownedcharacters[i][1]) {
                                    clues = clues - unownedcharacters[i][1]
                                    ownedcharacters.push(unownedcharacters[i][0])
                                    unownedcharacters.splice(i, 1)

                                    alert('You baught ' + checkbuy)

                                    shopcharacters()

                                } else {
                                    alert('Not enough clues')
                                }
                                break;
                            }

                        }
                        break;
                    }

                    checkbuy += x
                    param01++
                    param02++
                }
            }

            if (buying == 'essence') {
                alert('This isnt available yet')
            }

            if (buying == 'skin') {
                alert('This isnt available yet')
            }

            if (buying == 'auto') {
                alert('This isnt available yet')
            }
        }

        essence = [
            ['essence 1', 100],
            ['essence 2', 500]
        ];

        skin = [
            ['blood bath', 77],
            ['crystal chandilear', 8]
        ];

        auto = [
            ['Automatcher (quick)', 100],
            ['Automatcher (2v8)', 500]
        ];

        unownedcharacters = [
            [`Magician`, 4000],
            [`Explorer`, 4000],
            [`Mercenary`, 4000],
            [`Coordinator`, 4000],
            [`Mechanic`, 4000]
        ];

        ownedcharacters = [
            'Lucky guy',
            `Doctor`, 
            'Lawyer', 
            'Thief',
            `Gardener`,
        ];

    function opensettings() {
        document.getElementById('play_button').style.display = 'none'
        document.getElementById('settingspage').style.display = 'block'

        document.getElementById('shop_button').style.display = 'none'
        document.getElementById('settings_button').style.display = 'none'
        document.getElementById('inventory_button').style.display = 'none'
    }

    function closesettings() {
        document.getElementById('play_button').style.display = 'inline'
        document.getElementById('settingspage').style.display = 'none'

        document.getElementById('shop_button').style.display = 'inline'
        document.getElementById('settings_button').style.display = 'inline'
        document.getElementById('inventory_button').style.display = 'inline'
    }

    function openshop() {
        document.getElementById('play_button').style.display = 'none'
        document.getElementById('shoppage').style.display = 'block'

        document.getElementById('shop_button').style.display = 'none'
        document.getElementById('settings_button').style.display = 'none'
        document.getElementById('inventory_button').style.display = 'none'

        document.getElementById("shopsel").options.length = 0

        var terms = document.createElement("option");
        terms.setAttribute("id","na");
        document.getElementById('shopsel').appendChild(terms)
        document.getElementById('na').innerHTML = 'No catagory selected'
    }

    function closeshop() {
        document.getElementById('play_button').style.display = 'inline'
        document.getElementById('shoppage').style.display = 'none'

        document.getElementById('shop_button').style.display = 'inline'
        document.getElementById('settings_button').style.display = 'inline'
        document.getElementById('inventory_button').style.display = 'inline'
    }

    function openinv() {
        document.getElementById('play_button').style.display = 'none'
        document.getElementById('invpage').style.display = 'block'

        document.getElementById('shop_button').style.display = 'none'
        document.getElementById('settings_button').style.display = 'none'
        document.getElementById('inventory_button').style.display = 'none'
    }

    function closeinv() {
        document.getElementById('play_button').style.display = 'inline'
        document.getElementById('invpage').style.display = 'none'

        document.getElementById('shop_button').style.display = 'inline'
        document.getElementById('settings_button').style.display = 'inline'
        document.getElementById('inventory_button').style.display = 'inline'
    }

    function playquick() {
        document.getElementById('gamepage002').style.display = 'block'
        document.getElementById('gamepage001').style.display = 'none'

        stats = []
        team = ''

        for (let i = 0; i < 3; i++) {
        let x = Math.floor(Math.random() * survivors.length)
        stats.push(survivors[x])
        team += survivors[x][0] + '<br>'
        }

        document.getElementById("sel001").options.length = 0

            for(let i = 0; i < ownedcharacters.length; i++) {
                var terms = document.createElement("option");
                terms.setAttribute("id","opp" + i);
                document.getElementById('sel001').appendChild(terms)

                document.getElementById('opp' + i).innerHTML = ownedcharacters[i]
            }

        document.getElementById('quick_team').innerHTML = team
    }

    function runquick() {
        document.getElementById('gamepage003').style.display = 'block'
        document.getElementById('gamepage002').style.display = 'none'

        player = document.getElementById('sel001').value
        for (let i = 0; i < survivors.length; i++) {
            check = survivors[i][0]

            if (check == player) {
                stats.push(survivors[i])
            }
        }

        let hunter = [Math.floor(Math.random() * hunters.length)]

        kite = 0
        rescue = 0
        decode = 0

        better = 0

        //tally surv score
        for (let i = 0; i < 4; i++) {
            kite = kite + stats[i][1]
            rescue = rescue + stats[i][2]
            decode = decode + stats[i][3]
        }

        //check who has more score
        if (kite > hunters[hunter][1]) {
            better++
        }

        if (rescue > hunters[hunter][2]) {
            better++
        }

        if (decode > hunters[hunter][3]) {
            better++
        }

        if (better == 3) {
            win = Math.floor(Math.random() * 2) + 3
            add = Math.floor(Math.random() * 101) + 100
        } else if (better == 2) {
            win = Math.floor(Math.random() * 3) + 1
            add = Math.floor(Math.random() * 101) + 75
        } else if (better == 1) {
            win = Math.floor(Math.random() * 3)
            add = Math.floor(Math.random() * 101) + 50
        } if (better == 0) {
            win = Math.floor(Math.random() + 2)
            add = Math.floor(Math.random() * 101) + 25
        }

        clues = clues + add

        showteam = ''
        for (let i = 0; i < 4; i++) {
            showteam += stats[i][0] + ' | '
        }

        if (document.getElementById('extrares').checked) {
            document.getElementById('res').innerHTML = 
            'Hunter: ' + hunters[hunter][0] + '<br><br>' +
            '<details><summary>Survivor team</summary>' + showteam + '</details><br>' +
            'Kite vs chase <br>' + kite + ' - ' + hunters[hunter][1] + '<br><br>' +
            'Rescue vs camping <br>' + rescue + ' - ' + hunters[hunter][2] + '<br><br>' +
            'Decoding vs Map presure <br>' + decode + ' - ' + hunters[hunter][3] + '<br><br>' +
            'Catagories won ' + better + '/3' + '<br><br>' + 
            win + ' Survivors escaped' + '<br><br>' + 
            add + ' Clues gained'
        } else {
            document.getElementById('res').innerHTML = 
            'Hunter: ' + hunters[hunter][0] + '<br><br>' +
            '<details><summary>Survivor team</summary>' + showteam + '</details><br>' +
            win + ' Survivors escaped' + '<br><br>' + 
            add + ' Clues gained'
        }
    }

    function retrn() {
        document.getElementById('play_button').style.display = 'block'
        document.getElementById('gamepage003').style.display = 'none'

        document.getElementById('shop_button').style.display = 'inline'
        document.getElementById('settings_button').style.display = 'inline'
        document.getElementById('inventory_button').style.display = 'inline'
    }

    //kite - rescue - decode | average is 5

    let survivors = [
        ['Lucky guy', 5, 6, 5],
        ['Doctor', 6, 5, 5],
        ['Lawyer', 2, 3, 7],
        ['Thief', 6, 5, 5],
        ['Gardener', 6, 5, 5],
        ['Magician', 8, 4, 5],
        ['Explorer', 3, 1, 8],
        [`Mercenary`, 7, 9, 1],
        [`Coordinator`, 5, 7, 4],
        [`Mechanic`, 2, 5, 8],
        [`Forward`, 5, 8, 3],
        [`Mind's Eye`, 2, 1, 10],
        [`Priestess`, 7, 6, 4],
        [`Perfumer`, 7, 7, 5],
        [`Cowboy`, 6, 8, 5],
        [`Female Dancer`, 8, 5, 5],
        [`Seer`, 7, 6, 5],
        [`Embalmer`, 3, 10, 5],
        [`Prospector`, 6, 7, 5],
        [`Enchantress`, 7, 5, 5],
        [`Wildling`, 10, 4, 2],
        [`Acrobat`, 7, 6, 5],
        [`First Officer`, 8, 8, 3],
        [`Barmaid`, 6, 5, 5],
        [`Postman`, 4, 5, 8],
        [`Grave Keeper`, 6, 8, 3],
        [`Prisoner`, 6, 3, 8],
        [`Entomologist`, 7, 5, 5],
        [`Painter`, 5, 6, 5],
        [`Batter`, 6, 8, 3],
        [`Toy Merchant`, 5, 5, 5],
        [`Patient`, 7, 4, 5],
        [`Psychologist`, 5, 6, 5],
        [`Novelist`, 7, 7, 5],
        [`Little Girl`, 5, 5, 5],
        [`Weeping Clown`, 7, 8, 3],
        [`Professor`, 7, 6, 5],
        [`Antiquarian`, 10, 10, 5]
    ];

    let stats = [];

    //chase - camp - map resure | average is 10
    let hunters = [
        ['Hell ember', 5, 30, 15],
        ['Smiley face', 10, 15, 10],
        ['Game keeper', 15, 5, 5],
        ['Geisha', 25, 5, 20]
    ];
</script>
</html>
